[build]
  # Build command for React app
  command = "cd client && npm install && npm run build"
  # Publish directory (where the built React app is)
  publish = "client/dist"

# Redirect all routes to index.html for React Router (SPA routing)
# Note: Netlify serves existing files (JSON, CSS, JS, images) before applying redirects
# So JSON files will be served directly if they exist in the publish directory
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
  force = false

# Optional: API routes using Netlify Functions (if you want to use them)
# Otherwise, the app will use static JSON files from /public
[[redirects]]
  from = "/api/camps"
  to = "/.netlify/functions/camps"
  status = 200

[[redirects]]
  from = "/api/school-districts"
  to = "/.netlify/functions/school-districts"
  status = 200

[build.environment]
  NODE_VERSION = "18"
